entities:
  seaf.ia.logical_links_diagram:
    presentations:
      diagram_smartants:
        type: smartants
        source: >
          (
            {
              "nodes": $merge(
                  $."seaf.ia.data_objects".$spread().(
                    {
                      *.code: {
                          "title": *.title,
                          "symbol": "system"
                      }
                    }
                  )
              )
            ~> $merge(),
                "links": $."seaf.ia.logical_links".$spread().*.
                        {
                          "from": ($id := entity_a; $$."seaf.ia.data_objects".$spread()[$keys() = $id].*.code),
                          "to": ($id := entity_b; $$."seaf.ia.data_objects".$spread()[$keys() = $id].*.code),
                          "title": cardinality_a & ' ' & type & ' ' & cardinality_b,
                          "style": "<->"
                        }
            }
          )
